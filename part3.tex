\section{Мадэліраванне прататыпа размеркавання патокаў трафіка ў сетках SDN}

У дадзеным раздзеле разглядаецца мадэль невялікай гібрыднай SDN сеткі, якая працуе
пад кантролем вышэапісаннага алгарытма разліку нагрузкі.

Для сімуляцыі сеткі выкарыстоўваецца GNS3 праграма.
GNS3 --- гэта графічны сімулятар сеткі, які дазваляе змадэліраваць віртуальную
сетку з маршрутызатараў і віртуальных машын.

На малюнку \ref{img: model} прадстаўлена мадэль віртуальнай сеткі з 3 маршрутызатараў і 1 кантролера.

\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{model.png}
    \caption{Мадэль віртуальнай сеткі}
    \label{img: model} 
\end{figure}

У якасці элемента назірання возьмем маршрутызатар R1 і сеткі 10.10.11.0/24 і 10.10.33.0/24,
так як яны не падключаныя на прамую да выбранага маршрутызатара.

На малюнках \ref{img: initial topology} і \ref{img: initial routes} прадстаўлены
пачатковая тапалогія EIGRP маршрутаў і пачатковыя EIGRP маршруты адпаведна.

\clearpage

\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{initial_topology.png}
    \caption{Пачатковая EIGRP тапалогія}
    \label{img: initial topology} 
\end{figure}

\vspace{-\baselineskip}

\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{initial_routes.png}
    \caption{Пачатковыя EIGRP маршруты}
    \label{img: initial routes} 
\end{figure}

Можам заўважыць, што на малюнку \ref{img: initial topology} прадстаўлены 2 магчымых
маршруты да сеткі 10.10.33.0/24, у той час як ў табліцы маршрутызацыі (малюнак
\ref{img: initial routes}) абраны маршрут праз маршрутызатар R2 (адрас інтэрфейса 10.10.22.22). З табліцы маршрутызацыі таксама бачым, што для сеткі 10.10.11.0/24 выкарыстоўваецца балансіроўка паміж 2 маршрутамі.

Для змянення нагрузкі на маршрутызатары R1 будзем выкарыстоўваць тэхналогію flood ping,
якая дазволіць злёгкасцю адпраўляць вялікую колькасць даных за кароткі прамежак часу.
У той жа самы час паралельна запусцім на кантролеры праграму размеркавання патокаў даных для адсочвання нагрузкі.

На малюнку \ref{img: flood ping} прадстаўлена каманда ping.

\clearpage

\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{flood_ping.png}
    \caption{Flood Ping}
    \label{img: flood ping} 
\end{figure}

На малюнку \ref{img: start main} паказаны пачатковы вывад праграмы размеркавання патокаў даных на кантролеры.

\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{start_main.png}
    \caption{Пачатковы вывад праграмы размеркавання патокаў}
    \label{img: start main} 
\end{figure}

Пасля некаторага перыяду часу новая нагрузка на інтэрфейсе маршрутызатара R1 перавышая дапушчальны парог і кантролер падае каманду маршрутызатару перабудаваць тапалогію сеткі (малюнак \ref{img: stop main}). 

\begin{figure}[h!]
    \centering
    \includegraphics[width=0.5\textwidth]{stop_main.png}
    \caption{Лагіраванне падачы каманды на перабудовы тапалогі сеткі}
    \label{img: stop main} 
\end{figure}

На малюнку \ref{img: stop main} можам бачыць, што на інтэрфейсе маршрутызатара GigabitEthernet 2 новая нагрузка перавысіла дапушчальны парог, што справакавала перабудову тапалогіі сеткі, а ў інтэрфейс была
запісана новая нагрузка роўная 58.

На малюнку \ref{img: after topology} можам бачыць, што для сеткі 10.10.33.0/24 пасля перабудовы тапалогіі сеткі стаў даступны толькі 1 маршрут праз інтэрфейс GigabitEthernet 3, так інтэрфейс GigabitEthernet 2 у момант перабудовы тапалогіі быў загружаны і атрымаў высокую метрыку маршрута.

\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{after_topology.png}
    \caption{EIGRP тапалогія на маршрутызатары R1 пасля перабудовы}
    \label{img: stop main} 
\end{figure}

На малюнку \ref{img: after routes} можам заўважыць, што для сеткі 10.10.11.0/24 стаў даступны толькі
1 маршрут праз інтэрфейс GigabitEthernet 3, так як метрыка другога маршрута (малюнак \ref{img: initial routes}) стала больш за метрыку маршрута праз 10.10.22.22 і не можа быць прыдатная для балансіроўкі маршрута (балансіроўка маршрута адбываецца пры аднолькавых значэннях метрык на ўсіх маршрутах).

\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{after_routes.png}
    \caption{EIGRP маршрутры на маршрутызатары R1 пасля перабудовы}
    \label{img: after routes} 
\end{figure}

З вышэй апісанага прыкладу можам зрабіць вынік, што ўвядзенне кантролера ў традыцыйную сетку дазволіла
адаптаваць сетку да змяненна нагрузкі ў рэльным часе. Гэта дазваляе выкарыстоўваць рэсурсы сеткі больш аптымальна ў час высокай нагрузкі.
